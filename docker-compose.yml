services:
  exam_app:
    build: .
    container_name: exam_app
    ports:
      - "8010:8000"
    environment:
      - SECRET_KEY=${SECRET_KEY}
      - CLAUDE_API_KEY=${CLAUDE_API_KEY}
    restart: unless-stopped
    # 🔧 PERSISTENCIA: Volúmenes para mantener datos
    volumes:
      - exam_data:/app/exam.db
      - app_data:/app
    # 📁 Opcional: Para desarrollo, montar el código fuente
    # volumes:
    #   - ./:/app
    #   - exam_data:/app/exam.db

# 🗄️ VOLÚMENES: Definir almacenamiento persistente
volumes:
  exam_data:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: ./data
  app_data:
    driver: local